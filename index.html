<html lang="jp" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Send Message LIFF</title>
    <style>.selectbox {position: relative;}.selectbox::before, .selectbox::after {position: absolute;content: '';pointer-events: none;}.selectbox::before {right: 0;display: inline-block;width: 2.8em;height: 2.8em;border-radius: 0 3px 3px 0;background-color: #2589d0;content: '';}.selectbox::after {position: absolute;top: 50%;right: 1.4em;transform: translate(50%, -50%) rotate(45deg);width: 6px;height: 6px;border-bottom: 3px solid #fff;border-right: 3px solid #fff;content: '';}.selectbox select {appearance: none;-webkit-appearance: none;-moz-appearance: none;width: 26.5%;height: 2.8em;padding: .4em 3.6em .4em .8em;border: 2px solid #2589d0;border-radius: 3px;color: #333333;font-size: 1em;cursor: pointer;}.selectbox select:focus {outline: 1px solid #2589d0;}.textbox-label, #sendMessagesTextText, #log {color: #333;}.textbox-label {display: inline-block;margin-bottom: 5px;font-size: .9em;}#sendMessagesTextText, #log {padding: 8px 10px;border: 1px solid #d2d2d2;border-radius: 3px;background: #c7e8ff;font-size: 1em;line-height: 1.5;}#sendMessagesTextText, #log::placeholder {color: #999;}#go {display: inline-block;justify-content: center;align-items: center;position: relative;width: 100px;margin: 0 auto;padding: .9em 3em .9em 2em;border: 1px solid #2589d0;border-radius: 15px;background-color: #fff;color: #2589d0;font-size: 1em;}#go::after {position: absolute;right: 2em;transform: translateY(-50%);transform-origin: left;width: 2em;height: .5em;background-color: #2589d0;clip-path: polygon(0 100%, 100% 100%, 70% 40%, 70% 90%, 0% 90%);content: '';transition: transform .3s;}#go:hover::after {transform: translateY(-50%) scaleX(1.4);}</style>
    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
    <script type="text/javascript">
		document.addEventListener("DOMContentLoaded", () => {
			liff
				.init({
					liffId: '2003877495-kapxYKzm'
				})
				.then(() => {
					document.getElementById('go').addEventListener('click', () => {
					if(!liff.isInClient()){
						document.getElementById('log').value += 'No Liff Env\n';
					}else{
						const now = new Date();
						const diff = (Number(document.querySelector("select[name='st_hour']").value)-now.getHours())*3600 + (Number(document.querySelector("select[name='st_min']").value)-now.getMinutes())*60 + (Number(document.querySelector("select[name='st_sec']").value)-now.getSeconds())
						document.querySelector("#go").disabled=true;
						setTimeout(()=>{
							liff.sendMessages([{
								'type': 'text',
								'text': document.getElementById('sendMessagesTextText').value
							}]).then(function() {
								document.getElementById('log').value += 'sendMessagesText completed\n';
							}).catch(function(error) {
								document.getElementById('log').value += 'sendMessagesText()=' + error + '\n';
							});
						}, diff*1e3);
					}
					});
				})
				.catch((err) => {
					document.getElementById('log').value = 'init ng\n' + err;
				});
		});
    </script>
</head>
<body>
<div class="selectbox">
	<select name="st_hour">
		<option value="0">0</option>
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5</option>
		<option value="6">6</option>
		<option value="7">7</option>
		<option value="8">8</option>
		<option value="9">9</option>
		<option value="10">10</option>
		<option value="11">11</option>
		<option value="12">12</option>
		<option value="13">13</option>
		<option value="14">14</option>
		<option value="15">15</option>
		<option value="16">16</option>
		<option value="17">17</option>
		<option value="18">18</option>
		<option value="19">19</option>
		<option value="20">20</option>
		<option value="21">21</option>
		<option value="22">22</option>
		<option value="23">23</option>
		<option value="24" selected="">24</option>
	</select>
	<select name="st_min">
		<option value="0" selected="">0</option>
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5</option>
		<option value="6">6</option>
		<option value="7">7</option>
		<option value="8">8</option>
		<option value="9">9</option>
		<option value="10">10</option>
		<option value="11">11</option>
		<option value="12">12</option>
		<option value="13">13</option>
		<option value="14">14</option>
		<option value="15">15</option>
		<option value="16">16</option>
		<option value="17">17</option>
		<option value="18">18</option>
		<option value="19">19</option>
		<option value="20">20</option>
		<option value="21">21</option>
		<option value="22">22</option>
		<option value="23">23</option>
		<option value="24">24</option>
		<option value="25">25</option>
		<option value="26">26</option>
		<option value="27">27</option>
		<option value="28">28</option>
		<option value="29">29</option>
		<option value="30">30</option>
		<option value="31">31</option>
		<option value="32">32</option>
		<option value="33">33</option>
		<option value="34">34</option>
		<option value="35">35</option>
		<option value="36">36</option>
		<option value="37">37</option>
		<option value="38">38</option>
		<option value="39">39</option>
		<option value="40">40</option>
		<option value="41">41</option>
		<option value="42">42</option>
		<option value="43">43</option>
		<option value="44">44</option>
		<option value="45">45</option>
		<option value="46">46</option>
		<option value="47">47</option>
		<option value="48">48</option>
		<option value="49">49</option>
		<option value="50">50</option>
		<option value="51">51</option>
		<option value="52">52</option>
		<option value="53">53</option>
		<option value="54">54</option>
		<option value="55">55</option>
		<option value="56">56</option>
		<option value="57">57</option>
		<option value="58">58</option>
		<option value="59">59</option>
	</select>
	<select name="st_sec">
		<option value="0" selected="">0</option>
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
		<option value="4">4</option>
		<option value="5">5</option>
		<option value="6">6</option>
		<option value="7">7</option>
		<option value="8">8</option>
		<option value="9">9</option>
		<option value="10">10</option>
		<option value="11">11</option>
		<option value="12">12</option>
		<option value="13">13</option>
		<option value="14">14</option>
		<option value="15">15</option>
		<option value="16">16</option>
		<option value="17">17</option>
		<option value="18">18</option>
		<option value="19">19</option>
		<option value="20">20</option>
		<option value="21">21</option>
		<option value="22">22</option>
		<option value="23">23</option>
		<option value="24">24</option>
		<option value="25">25</option>
		<option value="26">26</option>
		<option value="27">27</option>
		<option value="28">28</option>
		<option value="29">29</option>
		<option value="30">30</option>
		<option value="31">31</option>
		<option value="32">32</option>
		<option value="33">33</option>
		<option value="34">34</option>
		<option value="35">35</option>
		<option value="36">36</option>
		<option value="37">37</option>
		<option value="38">38</option>
		<option value="39">39</option>
		<option value="40">40</option>
		<option value="41">41</option>
		<option value="42">42</option>
		<option value="43">43</option>
		<option value="44">44</option>
		<option value="45">45</option>
		<option value="46">46</option>
		<option value="47">47</option>
		<option value="48">48</option>
		<option value="49">49</option>
		<option value="50">50</option>
		<option value="51">51</option>
		<option value="52">52</option>
		<option value="53">53</option>
		<option value="54">54</option>
		<option value="55">55</option>
		<option value="56">56</option>
		<option value="57">57</option>
		<option value="58">58</option>
		<option value="59">59</option>
	</select>
</div>
<label>
	<span class="textbox-label">text</span>
	<input type="text" id="sendMessagesTextText" placeholder="text" value="" style="width:70%">
</label>
<div>
	<input type="button" id="go" value="実行">
	<input type="text" id="log" style="width:50%">
</div>


</body></html>
